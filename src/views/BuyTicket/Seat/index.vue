<template>
    <div>
        <div class="row" v-for="(row, rowIndex) in seats" :key="rowIndex">
            <div class="column" v-for="(seatStatus, colIndex) in row" :key="colIndex"
                @click="toggleSeat(rowIndex, colIndex)">
                <svg v-if="seatStatus === 0" t="1716896298786" class="icon" viewBox="0 0 1136 1024" version="1.1"
                    xmlns="http://www.w3.org/2000/svg" p-id="2333" width="48" height="48">
                    <path
                        d="M1079.234129 193.300702h-76.557828v-57.496491C1002.676301 70.370705 948.14213 0 828.386939 0h-519.968263c-119.742691 0-174.289362 70.370705-174.289363 135.766713v57.496491H57.533988c-38.747635 0-57.496491 18.748856-57.49649 57.496491v625.911797c0 68.133341 33.160476 78.220226 52.934269 78.220226h73.633006v20.711236c0 2.087373 0.362478 20.773732 14.261629 34.647885 6.249619 6.337113 17.598926 13.749161 36.447776 13.749161h782.264754c18.748856 0 30.185658-7.499542 36.447775-13.749161 13.849155-13.874153 14.24913-32.498016 14.249131-34.622887v-20.623741h73.483015c19.773793 0 52.92177-10.16188 52.92177-78.232725V250.822191c0-38.747635-18.748856-57.496491-57.496491-57.496491z m-917.444004-57.496491c0-53.884211 45.359731-108.168398 146.666048-108.168398h519.968264c101.243821 0 146.666048 54.321684 146.666048 108.168398v700.782228H161.690131z m947.442173 740.929777c0 33.58545-8.536979 50.609411-25.360952 50.609411h-101.243821v48.209558c-0.137492 6.337113-2.637339 20.823729-23.011095 20.823729H177.189185c-20.373756 0-22.898602-14.549112-23.023595-20.686237v-48.34705h-101.24382c-16.798975 0-25.360952-17.023961-25.360952-50.609411V250.822191c0-25.748428 8.749466-29.910674 29.935673-29.910674h79.220164v640.635898H1000.063961V220.911517h79.232664c21.086213 0 29.885676 4.162246 29.885676 29.910674z m0 0"
                        fill="#68cc6a" p-id="2334"></path>
                    <path
                        d="M161.640134 135.779213c0-53.871712 45.359731-108.168398 146.666048-108.168398h520.055759c101.243821 0 146.666048 54.334184 146.666048 108.168398v700.819725H161.640134z m0 0"
                        fill="#68cc6a" p-id="2335"></path>
                    <path
                        d="M1109.119805 876.733988c0 33.58545-8.536979 50.609411-25.360952 50.609411h-101.243821v48.209558c-0.137492 6.337113-2.637339 20.823729-23.011095 20.823729H177.189185c-20.373756 0-22.898602-14.549112-23.023595-20.686237v-48.34705h-101.24382c-16.798975 0-25.360952-17.023961-25.360952-50.609411V250.822191c0-25.748428 8.749466-29.910674 29.935673-29.910674h79.220164v640.635898H1000.063961V220.911517h79.232664c21.086213 0 29.885676 4.162246 29.885676 29.910674z m0 0"
                        fill="#68cc6a" p-id="2336"></path>
                    <path
                        d="M782.039768 235.560623L491.320012 526.280378l-136.241684-136.241684-82.057492 82.057492 218.224181 220.299054 372.477266-372.477266z m0 0"
                        fill="#68cc6a" p-id="2337"></path>
                </svg>
                <svg v-if="seatStatus === 2" t="1716896336916" class="icon" viewBox="0 0 1136 1024" version="1.1"
                    xmlns="http://www.w3.org/2000/svg" p-id="2522" width="48" height="48">
                    <path
                        d="M1079.234016 193.303212h-76.560747V135.77174c0-65.390357-54.536857-135.77174-174.289782-135.77174H308.350313c-119.73708 0-174.289782 70.381383-174.289782 135.77174V193.303212H57.515628C18.823296 193.303212 0 212.110664 0 250.81884v625.858761c0 68.13146 33.162592 78.224423 52.920715 78.224423h73.645355v20.69295c0 2.091477 0.364424 20.788018 14.260073 34.651978 6.226899 6.33781 17.603268 13.68967 36.442409 13.68967h782.307607c18.807452 0 30.183821-7.431083 36.442409-13.68967 13.848115-13.86396 14.260073-32.5605 14.260073-34.620289v-20.661261H1083.765551c19.773968 0 52.920715-10.156341 52.920715-78.224423V250.81884c0-38.708176-18.807452-57.515628-57.515628-57.515628zM161.693384 135.77174c0-53.871387 45.362877-108.154732 146.656929-108.154732h520.064863c101.294052 0 146.656929 54.315034 146.656929 108.154732V836.590951H161.693384zM1109.116791 876.740979c0 33.590394-8.524355 50.607415-25.35124 50.607415h-101.246519v48.214891c-0.126756 6.33781-2.630191 20.819707-23.006251 20.819707H177.18933c-20.37606 0-22.895339-14.561119-23.022096-20.692951v-48.341647H52.920715c-16.795197 0-25.351241-17.01702-25.35124-50.607415V250.81884c0-25.747354 8.809556-29.89862 29.914464-29.89862h79.222628v640.625859h863.352355V220.92022h79.222628c21.089064 0 29.914464 4.151266 29.914464 29.89862z m0 0"
                        fill="#ff8b8b" p-id="2523"></path>
                    <path
                        d="M161.693384 135.77174c0-53.871387 45.362877-108.154732 146.656929-108.154732h520.064863c101.294052 0 146.656929 54.315034 146.656929 108.154732V836.590951H161.693384z"
                        fill="#ff8b8b" p-id="2524"></path>
                    <path
                        d="M1109.116791 876.740979c0 33.590394-8.524355 50.607415-25.35124 50.607415h-101.246519v48.214891c-0.126756 6.33781-2.630191 20.819707-23.006251 20.819707H177.18933c-20.37606 0-22.895339-14.561119-23.022096-20.692951v-48.341647H52.920715c-16.795197 0-25.351241-17.01702-25.35124-50.607415V250.81884c0-25.747354 8.809556-29.89862 29.914464-29.89862h79.222628v640.625859h863.352355V220.92022h79.222628c21.089064 0 29.914464 4.151266 29.914464 29.89862z"
                        fill="#ff8b8b" p-id="2525"></path>
                </svg>
                <svg v-if="seatStatus===1" t="1716896383894" class="icon" viewBox="0 0 1136 1024" version="1.1"
                    xmlns="http://www.w3.org/2000/svg" p-id="2710" width="48" height="48">
                    <path
                        d="M1079.234129 193.300702h-76.557828v-57.496491C1002.676301 70.370705 948.14213 0 828.386939 0h-519.968263c-119.742691 0-174.289362 70.370705-174.289363 135.766713v57.496491H57.533988c-38.747635 0-57.496491 18.748856-57.49649 57.496491v625.911797c0 68.133341 33.160476 78.220226 52.934269 78.220226h73.633006v20.711236c0 2.087373 0.362478 20.773732 14.261629 34.647885 6.249619 6.337113 17.598926 13.749161 36.447776 13.749161h782.264754c18.748856 0 30.185658-7.499542 36.447775-13.749161 13.849155-13.874153 14.24913-32.498016 14.249131-34.622887v-20.623741h73.483015c19.773793 0 52.92177-10.16188 52.92177-78.232725V250.822191c0-38.747635-18.748856-57.496491-57.496491-57.496491z m-917.444004-57.496491c0-53.884211 45.359731-108.168398 146.666048-108.168398h519.968264c101.243821 0 146.666048 54.321684 146.666048 108.168398v700.782228H161.690131z m947.442173 740.929777c0 33.58545-8.536979 50.609411-25.360952 50.609411h-101.243821v48.209558c-0.137492 6.337113-2.637339 20.823729-23.011095 20.823729H177.189185c-20.373756 0-22.898602-14.549112-23.023595-20.686237v-48.34705h-101.24382c-16.798975 0-25.360952-17.023961-25.360952-50.609411V250.822191c0-25.748428 8.749466-29.910674 29.935673-29.910674h79.220164v640.635898H1000.063961V220.911517h79.232664c21.086213 0 29.885676 4.162246 29.885676 29.910674z m0 0"
                        fill="#d81e06" p-id="2711"></path>
                    <path
                        d="M161.640134 135.779213c0-53.871712 45.359731-108.168398 146.666048-108.168398h520.055759c101.243821 0 146.666048 54.334184 146.666048 108.168398v700.819725H161.640134z m0 0"
                        fill="#d81e06" p-id="2712"></path>
                    <path
                        d="M1109.119805 876.733988c0 33.58545-8.536979 50.609411-25.360952 50.609411h-101.243821v48.209558c-0.137492 6.337113-2.637339 20.823729-23.011095 20.823729H177.189185c-20.373756 0-22.898602-14.549112-23.023595-20.686237v-48.34705h-101.24382c-16.798975 0-25.360952-17.023961-25.360952-50.609411V250.822191c0-25.748428 8.749466-29.910674 29.935673-29.910674h79.220164v640.635898H1000.063961V220.911517h79.232664c21.086213 0 29.885676 4.162246 29.885676 29.910674z m0 0"
                        fill="#d81e06" p-id="2713"></path>
                    <path
                        d="M782.039768 235.560623L491.320012 526.280378l-136.241684-136.241684-82.057492 82.057492 218.224181 220.299054 372.477266-372.477266z m0 0"
                        fill="#d81e06" p-id="2714"></path>
                </svg>
            </div>
        </div>
    </div>
</template>


<script setup lang="ts">
import { ref, watch, computed } from 'vue';

const props = defineProps(['info']);
const emit = defineEmits(['newSeat',"position"])

const seats = ref<number[][]>([]);
const infoComputed = computed(() => props.info);
watch(infoComputed, (newValue) => {
    if (newValue) {
        seats.value = JSON.parse(newValue);
    }
});



const toggleSeat = (rowIndex: number, colIndex: number) => {
    const currentStatus = seats.value[rowIndex][colIndex];
    let newStatus = 0;

    if (currentStatus === 0) {
        newStatus = 2;
    } else if (currentStatus === 2) {
        newStatus = 0;
    } 

    // Update the status of the seat
    seats.value[rowIndex][colIndex] = newStatus;
    emit("newSeat", seats.value)
};



</script>

<style scoped lang="scss">
.row {
    display: flex;
    margin-bottom: 10px;
}

.column {
    width: 50px;
    height: 50px;
    margin-right: 10px;
    cursor: pointer;
}
</style>